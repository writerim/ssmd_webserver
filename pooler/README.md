device - просто оболочка для устройства.
issue - задача которую надо обработать
        Сама о себе заявляет устройтсвам
        Они принимают решение работать с ней или нет
        Говорят ей что готовы работать
        
pack - пакет который нужно передать или вверх или вних
    Содержит о себе правила передачи данных и то что он ожидает получить в ответ от них

toonel - объект который создается для того чтобы работать с пакетами
    У него есть события на которые навешиваются

event_mod
    Надстройка над модами и пакетами где прописана логика для формирования расписания пакетов


Для создания бибилиотеки нужно 
добавить протокол
 ParseData = function(){}
    PackData = function(){}
У него должно быть 2 функции для распаковки и запаковки данных

Добавить мод с описанием который наследуется от протокола

Добавить евент мод который наследуется от мода. 
В нем прописывается логика работы с пакетами когда и что отправлять

Добавить в синк, добавить в устройства


Читаем из БД последние данные
Они периодически спрашивают данные у прибора учета нужные для работы
типа нстроек каких нибудь или мод есть у него или нет

КАк только появляются, то они создают задачу
Задача спрашивает у других задач - Есть ли такая уже
Можно ключ какой нибудь
типа ISSUE.device_id.cmd

Ей все отвечают нету и она умирает
Последние данные снова начинают спрашивать

Когда задача содается, она начинает заебывать прибор.
Прибор спрашивает есть ли родитель?
Он говорит - дайте мне все дерево родителей
Ему дают. Он спрашивает, все ли могут взять его.
Ему все отвечают да и он говорит - вот эту задачу делать будем


Создаются модели моды евент которые слушают задачу
Прибор получает ок и уходит от дел
Дальше работает задача и евент моды
